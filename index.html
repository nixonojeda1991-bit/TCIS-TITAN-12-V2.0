<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PROTOCOLO OMNICORE | Acceso Restringido</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://www.paypal.com/sdk/js?client-id=Ad5D0SGYDZUBG6ucm74UN76VRUVpOeFE0KTW2QmV5nZEfXsOD39R_phO6AtFGswwRaJC5o7_gJtfBipX&currency=USD&components=buttons&enable-funding=card&disable-funding=venmo,paylater"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --bg: #050505; --wa: #25D366; }
        body { 
            background: var(--bg); color: #fff; font-family: 'Rajdhani', sans-serif;
            background-image: radial-gradient(circle at 50% 0%, #111 0%, #000 85%);
            min-height: 100vh; margin: 0; -webkit-tap-highlight-color: transparent;
        }
        .gold-text { font-family: 'Orbitron', sans-serif; background: linear-gradient(180deg, #FFF, var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .glass { background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(20px); border: 1px solid rgba(212, 175, 55, 0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.9); }
        
        .wa-float {
            position: fixed; bottom: 25px; right: 25px; z-index: 9999;
            background: var(--wa); color: white; width: 60px; height: 60px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 20px rgba(37, 211, 102, 0.4); transition: transform 0.2s;
        }
        .wa-float:active { transform: scale(0.95); }

        /* Ocultamos la maquinaria t√©cnica al usuario com√∫n */
        .hidden-control { display: none; }

        .sync-btn {
            background: linear-gradient(90deg, #D4AF37 0%, #B8860B 100%); 
            color: #000; font-family: 'Orbitron', sans-serif; font-weight: 900; letter-spacing: 2px;
            clip-path: polygon(0 0, 95% 0, 100% 30%, 100% 100%, 5% 100%, 0 70%);
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        .sync-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2); }
    </style>
</head>
<body class="p-4 md:p-8 flex flex-col items-center justify-center min-h-screen">

    <a href="https://wa.me/584124577822?text=Solicito%20audiencia%20con%20el%20Arquitecto." target="_blank" class="wa-float">
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.414 0 .018 5.393 0 12.03c0 2.12.554 4.189 1.602 6.033L0 24l6.149-1.613a11.77 11.77 0 005.912 1.594h.005c6.632 0 12.028-5.391 12.03-12.028a11.85 11.85 0 00-3.417-8.467z"/></svg>
    </a>

    <header class="w-full max-w-2xl text-center mb-10">
        <div class="mb-4">
            <span class="px-3 py-1 border border-gold/30 rounded-full text-[9px] text-gold tracking-[0.3em] uppercase bg-gold/5">Acceso VŒ©.11</span>
        </div>
        <h1 class="gold-text text-5xl md:text-6xl font-black italic tracking-tighter mb-6">OMNICORE</h1>
        <p class="text-gray-400 text-sm md:text-base leading-relaxed max-w-md mx-auto font-light">
            No vendemos c√≥digo. Vendemos <span class="text-white font-bold">Soberan√≠a</span>.
            √önete al c√≠rculo cerrado que entiende que la tecnolog√≠a no se pide, se conquista.
        </p>
    </header>

    <main class="w-full max-w-md">
        
        <section class="glass p-8 rounded-2xl relative overflow-hidden">
            
            <div class="space-y-8 relative z-10">
                
                <div class="text-center space-y-2">
                    <h3 class="text-white font-bold text-xl uppercase font-orbitron tracking-widest">Iniciaci√≥n</h3>
                    <div class="h-0.5 w-12 bg-gold mx-auto"></div>
                    <p class="text-[10px] text-gold/60 uppercase tracking-[0.2em] mt-1">Filtro de Intenci√≥n</p>
                </div>

                <div class="space-y-4 text-sm text-gray-300 font-medium">
                    <p class="text-center italic text-gray-400">"El sistema es la caja negra. T√∫ solo necesitas la llave."</p>
                    <ul class="space-y-3 pl-4 border-l border-white/10">
                        <li class="flex items-center gap-3">
                            <span class="text-gold">‚ñπ</span> Acceso al Manifiesto del Arquitecto.
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="text-gold">‚ñπ</span> Auditor√≠a de Viabilidad (Diagn√≥stico).
                        </li>
                        <li class="flex items-center gap-3">
                            <span class="text-gold">‚ñπ</span> Entrada al Ecosistema Soberano.
                        </li>
                    </ul>
                </div>

                <div class="space-y-4 pt-4 border-t border-white/5">
                    <div class="relative">
                        <input type="tel" id="user-phone" class="w-full bg-black/60 border border-white/10 p-4 pl-12 rounded-lg text-gold font-mono outline-none focus:border-gold transition-all text-center placeholder-gray-700" placeholder="WhatsApp (+58...)">
                        <span class="absolute left-4 top-4 text-gray-600">üì±</span>
                    </div>

                    <div class="hidden-control">
                        <input type="range" id="gi-slider" value="98">
                        <input type="range" id="ga-slider" value="98">
                        <textarea id="user-intent">SOLICITUD DE MEMBRES√çA AL C√çRCULO OMNICORE. PAGO DE FILTRO DE SOBERAN√çA.</textarea>
                    </div>

                    <button id="main-sync-btn" onclick="executeSync()" class="sync-btn w-full py-4 text-xs shadow-[0_0_20px_rgba(212,175,55,0.15)]">
                        VALIDAR ACCESO - $7.00 USD
                    </button>
                </div>
            </div>
        </section>

        <section id="display-content" class="mt-6 hidden fade-in">
            <div class="glass rounded-xl p-6 text-center border border-gold/20">
                
                <div id="state-processing" class="space-y-4 py-4">
                    <div class="w-8 h-8 border-2 border-gold border-t-transparent rounded-full animate-spin mx-auto"></div>
                    <p class="text-[10px] text-gold tracking-widest uppercase">Consultando al N√∫cleo...</p>
                </div>

                <div id="state-result" class="hidden">
                    <p class="text-[10px] text-gray-400 mb-4 uppercase tracking-widest">Filtro Superado</p>
                    <div id="paypal-button-container"></div>
                </div>

            </div>
        </section>

    </main>

    <footer class="mt-12 opacity-30 text-[9px] font-orbitron tracking-widest">
        TIT√ÅN VŒ©.11 // SISTEMA CERRADO
    </footer>

    <script>
        const ENDPOINT = "https://us-central1-tcis-titan-12.cloudfunctions.net/agos-v11";
        const AUTH = "dosespejossemiranyelpezrespirafueradelagua";

        async function executeSync() {
            const phone = document.getElementById('user-phone').value;
            // Validamos que pongan algo real
            if(phone.length < 8) { alert("‚ö†Ô∏è IDENTIFICACI√ìN REQUERIDA: Ingresa tu WhatsApp."); return; }

            // UI
            const btn = document.getElementById('main-sync-btn');
            btn.innerText = "VERIFICANDO...";
            btn.disabled = true;
            document.getElementById('display-content').classList.remove('hidden');
            
            try {
                // LLAMADA AL CEREBRO (Tu Cloud Function)
                const response = await fetch(ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-MBR-Auth': AUTH },
                    body: JSON.stringify({
                        user_intent: `[MEMBRESIA] Nuevo Aspirante WA: ${phone}`,
                        observation: { gi_value: 0.99, ga_value: 0.99 } // Valores m√°ximos para asegurar entrada
                    })
                });
                
                // Simular un poco de "pensamiento" para dar valor
                await new Promise(r => setTimeout(r, 1500));
                
                document.getElementById('state-processing').classList.add('hidden');
                document.getElementById('state-result').classList.remove('hidden');
                renderPayPal();

            } catch (e) { 
                alert("Conexi√≥n interrumpida. Reintenta.");
                btn.disabled = false;
                btn.innerText = "REINTENTAR";
            }
        }

        function renderPayPal() {
            const container = document.getElementById('paypal-button-container');
            container.innerHTML = ''; 

            paypal.Buttons({
                style: { shape: 'rect', color: 'gold', layout: 'vertical', label: 'pay' },
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            description: "ACCESO AL C√çRCULO OMNICORE (FILTRO)",
                            amount: { value: '7.00' }
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        const phone = document.getElementById('user-phone').value;
                        // Redirecci√≥n post-pago: "Ya pagu√©, dame acceso"
                        const msg = `üèõÔ∏è ARQUITECTO. He superado el filtro.\nüÜî ID: ${details.id}\nüë§ Nombre: ${details.payer.name.given_name}\nüîì Solicito mi entrada al sistema.`;
                        window.location.href = `https://wa.me/584124577822?text=${encodeURIComponent(msg)}`;
                    });
                },
                onError: function (err) {
                    console.error(err);
                    alert("Transacci√≥n denegada por el banco.");
                }
            }).render('#paypal-button-container');
        }
    </script>
</body>
</html>

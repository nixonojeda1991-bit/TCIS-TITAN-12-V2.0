<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIT√ÅN VŒ©.11 | Sistema de Auditor√≠a Estrat√©gica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PARTE 1: SDK de PayPal (Botones Hospedados) -->
    <script src="https://www.paypal.com/sdk/js?client-id=BAA1vZa0wSM2Mz7GjGZTtvTJGjguge3Sbfq3HzEirH-logMDlVWhxdgxSZSo73-wnDVoSBJJLiZAIsv9Ck&components=hosted-buttons&disable-funding=venmo&currency=USD"></script>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { 
            --gold: #D4AF37; 
            --gold-bright: #FFD700;
            --dark: #050505; 
        }
        body { 
            background-color: var(--dark); 
            color: #e5e5e5; 
            font-family: 'Inter', sans-serif;
            background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .glass { 
            background: rgba(10, 10, 10, 0.9); 
            border: 1px solid rgba(212, 175, 55, 0.15); 
            backdrop-filter: blur(12px); 
        }
        .text-gold { color: var(--gold); }
        
        /* Animaci√≥n de escaneo para la firma */
        .scan-line {
            width: 100%; height: 2px; background: var(--gold); position: absolute;
            animation: scan 2s linear infinite; opacity: 0.4; box-shadow: 0 0 10px var(--gold);
        }
        @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }

        input[type=range] { -webkit-appearance: none; background: #222; height: 4px; border-radius: 2px; }
        input[type=range]::-webkit-slider-thumb { 
            -webkit-appearance: none; height: 16px; width: 16px; 
            border-radius: 50%; background: var(--gold); cursor: pointer; 
            box-shadow: 0 0 8px var(--gold); 
        }

        .fade-in { animation: fadeIn 0.6s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <!-- CABECERA: IDENTIDAD SOBERANA -->
    <header class="w-full max-w-5xl flex flex-col md:flex-row justify-between items-center border-b border-gold/20 pb-6 mb-10 gap-6">
        <div class="text-center md:text-left">
            <h1 class="font-orbitron text-3xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-white via-gold to-gold-bright tracking-tighter">
                TIT√ÅN VŒ©.11
            </h1>
            <p class="text-[10px] tracking-[0.4em] text-gray-500 uppercase font-bold mt-2">
                Ingenier√≠a de Inferencia <span class="text-gold mx-2">|</span> Arquitecto Nixon Ojeda
            </p>
        </div>
        
        <!-- Sello de Autor√≠a Original -->
        <div class="glass px-5 py-3 rounded-lg border-l-4 border-gold flex items-center gap-4">
            <div class="relative w-10 h-10 border border-gold/40 rounded-full flex items-center justify-center overflow-hidden">
                <div class="scan-line"></div>
                <svg class="w-6 h-6 text-gold/60" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12l2 2 4-4m5.618-4.016A3.323 3.323 0 0010.603 2.112a3.323 3.323 0 00-4.583 1.354 3.323 3.323 0 00-1.354 4.583a3.323 3.323 0 001.354 4.583 3.323 3.323 0 004.583-1.354 3.323 3.323 0 001.354-4.583z" stroke-width="1.5"></path></svg>
            </div>
            <div>
                <p class="text-[8px] text-gray-500 uppercase tracking-widest leading-none mb-1">Cripto-Firma</p>
                <p class="text-xs text-white font-orbitron tracking-tighter">NIXON OJEDA</p>
            </div>
        </div>
    </header>

    <main class="w-full max-w-5xl grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <!-- PANEL DE CONTROL (ENTRADA) -->
        <section class="glass p-8 rounded-3xl shadow-2xl border-t-2 border-t-gold/40">
            <div class="flex items-center gap-2 mb-8">
                <div class="w-2 h-2 bg-gold rounded-full animate-pulse"></div>
                <h2 class="font-orbitron text-[10px] text-gold tracking-[0.3em] uppercase">01. Par√°metros de Inferencia</h2>
            </div>
            
            <div class="space-y-8 mb-8">
                <div>
                    <div class="flex justify-between text-[10px] font-bold text-gray-500 mb-3 uppercase tracking-widest">
                        <span>Grado de Intenci√≥n (GI)</span> <span id="gi-val" class="text-gold font-orbitron">50%</span>
                    </div>
                    <input type="range" id="gi" class="w-full" min="0" max="100" value="50">
                </div>
                <div>
                    <div class="flex justify-between text-[10px] font-bold text-gray-500 mb-3 uppercase tracking-widest">
                        <span>Grado de Acci√≥n (GA)</span> <span id="ga-val" class="text-gold font-orbitron">50%</span>
                    </div>
                    <input type="range" id="ga" class="w-full" min="0" max="100" value="50">
                </div>
            </div>

            <div class="mb-8">
                <label class="text-[9px] uppercase text-gray-500 tracking-[0.2em] mb-3 block font-bold italic">Definici√≥n de Objetivo Estrat√©gico</label>
                <textarea id="intencion" rows="5" class="w-full bg-black/60 border border-gold/10 rounded-xl p-4 text-sm focus:border-gold/40 transition-all outline-none text-white placeholder:text-gray-800 resize-none shadow-inner" placeholder="Escriba aqu√≠ la misi√≥n de TIT√ÅN..."></textarea>
            </div>

            <button onclick="ejecutarAuditoria()" id="btn-action" class="w-full py-5 bg-gradient-to-r from-gold via-gold-bright to-gold text-black font-orbitron font-bold text-[11px] tracking-[0.4em] rounded-xl hover:brightness-110 active:scale-95 transition-all shadow-lg uppercase">
                Iniciar Auditor√≠a Tit√°n
            </button>
        </section>

        <!-- PANEL DE RESPUESTA (RESULTADO Y PAGO) -->
        <section id="panel-derecho" class="glass p-8 rounded-3xl flex flex-col justify-center min-h-[500px] relative overflow-hidden border-b-2 border-b-gold/40">
            
            <!-- Estado Inicial -->
            <div id="estado-espera" class="text-center">
                <div class="text-6xl mb-6 opacity-10">üì°</div>
                <p class="font-orbitron text-[10px] text-gray-600 tracking-[0.6em] uppercase">N√∫cleo Desconectado</p>
                <p class="text-[9px] text-gray-700 mt-3 italic tracking-widest">Arquitecto Nixon: Esperando comandos de voz o texto...</p>
            </div>

            <!-- Loader de Procesamiento -->
            <div id="loader" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/90 z-20">
                <div class="relative w-20 h-20">
                    <div class="absolute inset-0 border-2 border-gold/10 rounded-full"></div>
                    <div class="absolute inset-0 border-t-2 border-gold rounded-full animate-spin"></div>
                </div>
                <p class="text-[10px] font-orbitron text-gold mt-8 animate-pulse tracking-[0.5em] uppercase text-center">Analizando Probabilidades<br><span class="text-[8px] text-gray-500">Red Neuronal Soberana</span></p>
            </div>

            <!-- Resultado de la IA -->
            <div id="resultado-final" class="hidden w-full fade-in space-y-6">
                <div class="flex items-center gap-2 mb-4">
                    <div class="w-2 h-2 bg-gold rounded-full"></div>
                    <h2 class="font-orbitron text-[10px] text-gold tracking-[0.3em] uppercase">02. Veredicto del N√∫cleo</h2>
                </div>
                
                <div class="bg-white/5 border-l-2 border-gold p-6 rounded-r-2xl shadow-inner">
                    <p id="titulo-status" class="font-orbitron text-[10px] mb-4 tracking-widest"></p>
                    <p id="mensaje-ia" class="text-sm text-gray-300 leading-relaxed font-light italic"></p>
                </div>

                <!-- SECCI√ìN DE PAGO (Bot√≥n Hospedado V7VP3T98HFVK4) -->
                <div id="zona-pago" class="hidden pt-6 border-t border-gold/10">
                    <div class="mb-6 text-center">
                        <p class="text-[10px] font-bold text-gray-400 tracking-[0.2em] uppercase mb-1">M√≥dulo de Transacci√≥n Protegida</p>
                        <p class="text-[8px] text-gold/40 uppercase tracking-widest">Procesado por PayPal Secure Network</p>
                    </div>
                    
                    <!-- Contenedor del Bot√≥n que pediste -->
                    <div id="paypal-container-V7VP3T98HFVK4" class="flex justify-center"></div>
                    
                    <p class="text-[9px] text-center text-gray-600 mt-6 italic">Nota: PayPal solicitar√° datos de verificaci√≥n para residentes en Venezuela.</p>
                </div>

                <!-- Opci√≥n de Soporte en caso de Rechazo -->
                <div id="zona-rechazo" class="hidden pt-4">
                    <a href="https://wa.me/584124577822?text=CONSULTA_TITAN_RECHAZADA" target="_blank" class="block text-center py-4 border border-red-500/30 text-red-500 text-[9px] font-bold rounded-xl hover:bg-red-500/5 transition-all uppercase tracking-[0.3em]">
                        Contactar Soporte Estrat√©gico
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer class="w-full max-w-5xl mt-16 pb-10 flex flex-col items-center border-t border-white/5 pt-10">
        <p class="text-[10px] text-gray-500 tracking-[0.5em] uppercase text-center mb-3">Dise√±o de Sistemas: Nixon Ojeda</p>
        <div class="flex gap-4 text-[8px] text-gray-700 font-bold tracking-widest uppercase">
            <span>Zulia, Venezuela</span>
            <span class="text-gold">‚Ä¢</span>
            <span>Estabilidad VŒ©.11</span>
        </div>
    </footer>

    <!-- BOT√ìN WHATSAPP -->
    <a href="https://wa.me/584124577822" target="_blank" class="fixed bottom-8 right-8 bg-[#25D366] text-white p-4 rounded-full shadow-2xl z-50 transition-all hover:scale-110 active:scale-95">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
    </a>

    <script>
        const API_URL = "https://us-central1-tcis-titan-12.cloudfunctions.net/agos-v11"; 
        const API_KEY = "dosespejossemiranyelpezrespirafueradelagua";
        
        const giSlider = document.getElementById('gi'); 
        const gaSlider = document.getElementById('ga');
        
        giSlider.oninput = () => document.getElementById('gi-val').innerText = giSlider.value + "%";
        gaSlider.oninput = () => document.getElementById('ga-val').innerText = gaSlider.value + "%";
        
        async function ejecutarAuditoria() {
            const intencion = document.getElementById('intencion').value.trim();
            if(!intencion) return;

            document.getElementById('estado-espera').classList.add('hidden');
            document.getElementById('resultado-final').classList.add('hidden');
            document.getElementById('loader').classList.remove('hidden');

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-MBR-Auth': API_KEY },
                    body: JSON.stringify({ 
                        observation: { 
                            gi_value: parseInt(giSlider.value) / 100, 
                            ga_value: parseInt(gaSlider.value) / 100, 
                            user_intent: intencion 
                        } 
                    })
                });

                const data = await response.json();
                
                document.getElementById('loader').classList.add('hidden');
                document.getElementById('resultado-final').classList.remove('hidden');
                document.getElementById('mensaje-ia').innerText = data.message;

                if(data.decision === "act") {
                    document.getElementById('titulo-status').innerHTML = `<span class="text-gold">PROCESO AVALADO</span>`;
                    document.getElementById('zona-pago').classList.remove('hidden');
                    document.getElementById('zona-rechazo').classList.add('hidden');

                    // PARTE 2: Renderizar el Bot√≥n de Pago con el HostedButtonId nuevo
                    const containerId = "paypal-container-V7VP3T98HFVK4";
                    document.getElementById(containerId).innerHTML = ''; // Limpiar
                    
                    if (window.paypal && window.paypal.HostedButtons) {
                        paypal.HostedButtons({
                            hostedButtonId: "V7VP3T98HFVK4",
                        }).render("#" + containerId);
                    }
                } else {
                    document.getElementById('titulo-status').innerHTML = `<span class="text-red-500">ACCI√ìN RESTRINGIDA</span>`;
                    document.getElementById('zona-pago').classList.add('hidden');
                    document.getElementById('zona-rechazo').classList.remove('hidden');
                }
            } catch (error) {
                console.error(error);
                document.getElementById('loader').classList.add('hidden');
                document.getElementById('estado-espera').classList.remove('hidden');
            }
        }
    </script>
</body>
</html>

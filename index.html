<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIT√ÅN VŒ©.11 | B√≥veda de Intenci√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --dark: #050505; --panel: #111; }
        body { background-color: var(--dark); color: #e5e5e5; font-family: 'Inter', sans-serif; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .text-gold { color: var(--gold); }
        .border-gold { border-color: var(--gold); }
        .glow { box-shadow: 0 0 15px rgba(212, 175, 55, 0.3); }
        .glass { background: rgba(20, 20, 20, 0.9); border: 1px solid rgba(212, 175, 55, 0.2); }
        input[type=range] { -webkit-appearance: none; background: #333; height: 2px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: var(--gold); cursor: pointer; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]">

    <header class="text-center mb-8">
        <h1 class="font-orbitron text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#bf953f] via-[#fcf6ba] to-[#bf953f] drop-shadow-lg">
            TIT√ÅN VŒ©.11
        </h1>
        <p class="text-[10px] tracking-[0.4em] text-gray-500 mt-2 uppercase">Arquitectura de Intenci√≥n | Santa Rita, VZLA</p>
    </header>

    <main class="w-full max-w-lg grid gap-6">
        
        <section class="glass p-6 rounded-xl shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 left-0 w-1 h-full bg-gold"></div>
            
            <h2 class="font-orbitron text-sm text-gold mb-6 border-b border-white/10 pb-2">PAR√ÅMETROS DE ENTRADA</h2>

            <div class="mb-5">
                <div class="flex justify-between text-xs font-bold text-gray-400 mb-2">
                    <span>INTENCI√ìN (GI)</span> <span id="gi-val" class="text-gold">50%</span>
                </div>
                <input type="range" id="gi" class="w-full" min="0" max="100" value="50">
            </div>

            <div class="mb-6">
                <div class="flex justify-between text-xs font-bold text-gray-400 mb-2">
                    <span>ACCI√ìN (GA)</span> <span id="ga-val" class="text-gold">50%</span>
                </div>
                <input type="range" id="ga" class="w-full" min="0" max="100" value="50">
            </div>

            <textarea id="intencion" rows="3" class="w-full bg-black border border-white/20 rounded-md p-3 text-sm focus:border-gold outline-none transition-colors placeholder:text-gray-700 mb-4" placeholder="Describa su objetivo estrat√©gico aqu√≠..."></textarea>

            <button onclick="consultarTitan()" id="btn-action" class="w-full py-3 bg-gradient-to-r from-[#bf953f] to-[#aa771c] text-black font-orbitron font-bold text-sm tracking-widest rounded hover:scale-[1.02] transition-transform active:scale-95 shadow-lg shadow-gold/20">
                AUDITAR SOBERAN√çA
            </button>
        </section>

        <section id="panel-resultado" class="glass p-6 rounded-xl hidden border-t-4 border-gold transition-all duration-500">
            <h3 id="status-titulo" class="font-orbitron text-2xl mb-2 text-white"></h3>
            
            <div class="bg-black/50 p-4 rounded border-l-2 border-gold mb-6">
                <p class="text-[10px] text-gold tracking-widest uppercase mb-1">Mandato del Or√°culo:</p>
                <p id="mensaje-ia" class="text-sm italic text-gray-300 leading-relaxed"></p>
            </div>

            <div id="zona-pago" class="hidden opacity-0 transition-opacity duration-1000">
                <div class="flex items-center justify-between bg-white/5 p-3 rounded mb-4">
                    <span class="text-xs text-gray-400">LICENCIA OMEGA</span>
                    <span class="font-orbitron text-gold font-bold">$5.00 USD</span>
                </div>
                <button class="w-full py-3 bg-[#0070ba] hover:bg-[#005ea6] text-white font-bold rounded flex items-center justify-center gap-2 transition-colors">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.946 5.05-4.336 6.794-9.116 6.794H9.468a.5.5 0 0 0-.494.563l1.432 8.964a.5.5 0 0 1-.497.563h-2.833z"/></svg>
                    Pagar con PayPal
                </button>
                <p class="text-[9px] text-center text-gray-600 mt-2">Acceso Inmediato al Protocolo de Ejecuci√≥n</p>
            </div>

            <div id="zona-rechazo" class="hidden">
                <a href="https://wa.me/58XXXXXXXXXX" class="block w-full py-3 border border-red-500 text-red-400 text-center font-bold rounded hover:bg-red-500/10 transition-colors text-xs uppercase tracking-widest">
                    SOLICITAR MENTOR√çA DE EMERGENCIA
                </a>
            </div>
        </section>

    </main>

    <footer class="mt-12 text-[9px] text-gray-600 font-mono">
        SYSTEM: AGOS11.5 | ENGINE: GEMINI 3 FLASH | STATUS: ACTIVE
    </footer>

    <script>
        // CONFIGURACI√ìN
        const API_URL = "https://us-central1-tcis-titan-12.cloudfunctions.net/agos-v11"; // Tu URL
        const API_KEY = "dosespejossemiranyelpezrespirafueradelagua";

        // UI Logic
        const giSlider = document.getElementById('gi');
        const gaSlider = document.getElementById('ga');
        
        giSlider.oninput = () => document.getElementById('gi-val').innerText = giSlider.value + "%";
        gaSlider.oninput = () => document.getElementById('ga-val').innerText = gaSlider.value + "%";

        async function consultarTitan() {
            const intencion = document.getElementById('intencion').value;
            const btn = document.getElementById('btn-action');
            const panel = document.getElementById('panel-resultado');
            
            if(!intencion) return alert("El sistema requiere una intenci√≥n clara.");

            // Loading state
            btn.innerText = "PROCESANDO EN NUBE...";
            btn.disabled = true;
            panel.classList.add('hidden');

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-MBR-Auth': API_KEY },
                    body: JSON.stringify({
                        observation: {
                            gi_value: parseInt(giSlider.value) / 100,
                            ga_value: parseInt(gaSlider.value) / 100,
                            user_intent: intencion
                        }
                    })
                });

                const data = await response.json();
                
                // Renderizar Resultados
                panel.classList.remove('hidden');
                document.getElementById('mensaje-ia').innerText = `"${data.message}"`;

                if(data.decision === "act") {
                    document.getElementById('status-titulo').innerHTML = `<span class="text-green-400">‚úÖ APROBADO</span>`;
                    const zonaPago = document.getElementById('zona-pago');
                    zonaPago.classList.remove('hidden');
                    setTimeout(() => zonaPago.classList.remove('opacity-0'), 100);
                    document.getElementById('zona-rechazo').classList.add('hidden');
                } else {
                    document.getElementById('status-titulo').innerHTML = `<span class="text-red-500">üõë VETO T√âCNICO</span>`;
                    document.getElementById('zona-pago').classList.add('hidden');
                    document.getElementById('zona-rechazo').classList.remove('hidden');
                }

            } catch (error) {
                alert("Error de conexi√≥n con el TIT√ÅN. Reintente.");
                console.error(error);
            } finally {
                btn.innerText = "AUDITAR SOBERAN√çA";
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>

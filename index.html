<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIT√ÅN VŒ©.11 | Inteligencia Soberana</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://www.paypal.com/sdk/js?client-id=BAA1vZa0wSM2Mz7GjGZTtvTJGjguge3Sbfq3HzEirH-logMDlVWhxdgxSZSo73-wnDVoSBJJLiZAIsv9Ck&currency=USD&components=buttons&disable-funding=venmo"></script>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --dark: #050505; }
        body { background-color: var(--dark); color: #e5e5e5; font-family: 'Inter', sans-serif; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .text-gold { color: var(--gold); }
        .glass { background: rgba(15, 15, 15, 0.95); border: 1px solid rgba(212, 175, 55, 0.2); }
        input[type=range] { -webkit-appearance: none; background: #333; height: 4px; border-radius: 2px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%; background: var(--gold); cursor: pointer; }
        .float-btn { animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .digital-print { letter-spacing: 0.15em; text-transform: uppercase; font-size: 0.65rem; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-2 md:p-6 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] relative">

    <header class="w-full max-w-6xl border-b border-white/10 pb-4 mb-4">
        <div class="flex flex-col md:flex-row justify-between items-end gap-2">
            <div>
                <h1 class="font-orbitron text-2xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#bf953f] via-[#fcf6ba] to-[#bf953f]">TIT√ÅN VŒ©.11</h1>
                <div class="flex items-center gap-2 mt-2">
                    <span class="h-px w-8 bg-gold/50"></span>
                    <p class="digital-print text-gray-400 font-orbitron"><span class="text-gold">N√öCLEO DE INTELIGENCIA SOBERANA</span> | POTENCIA TECNOL√ìGICA VENEZOLANA</p>
                </div>
            </div>
            <div class="text-right"><p class="text-[9px] text-gray-600 uppercase tracking-widest">Arquitecto: Nixon Ojeda</p></div>
        </div>
    </header>

    <main class="w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 gap-4 h-full">
        <section class="glass p-5 rounded-xl h-fit shadow-2xl">
            <h2 class="font-orbitron text-xs text-gold mb-4 tracking-widest border-b border-white/10 pb-2">1. C√ÅMARA DE INFERENCIA</h2>
            <div class="space-y-4 mb-4">
                <div><div class="flex justify-between text-xs font-bold text-gray-400 mb-1"><span>INTENCI√ìN (GI)</span> <span id="gi-val" class="text-gold">50%</span></div><input type="range" id="gi" class="w-full" min="0" max="100" value="50"></div>
                <div><div class="flex justify-between text-xs font-bold text-gray-400 mb-1"><span>ACCI√ìN (GA)</span> <span id="ga-val" class="text-gold">50%</span></div><input type="range" id="ga" class="w-full" min="0" max="100" value="50"></div>
            </div>
            <textarea id="intencion" rows="3" class="w-full bg-black/50 border border-white/20 rounded p-2 text-sm focus:border-gold outline-none text-white placeholder:text-gray-700 resize-none mb-4" placeholder="Ej: Lanzar preventa OMEGA..."></textarea>
            <button onclick="consultarTitan()" id="btn-action" class="w-full py-3 bg-white text-black font-orbitron font-bold text-xs tracking-[0.2em] rounded hover:bg-gold transition-all shadow-lg">EJECUTAR AUDITOR√çA</button>
        </section>

        <section id="panel-derecho" class="glass p-5 rounded-xl flex flex-col justify-center min-h-[350px] relative border-t-2 border-white/5 shadow-2xl">
            <div id="estado-espera" class="text-center opacity-40"><div class="text-3xl mb-2">üõ∞Ô∏è</div><p class="font-orbitron text-[10px] text-gray-400 tracking-widest">SISTEMA EN ESPERA</p></div>
            <div id="loader" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-black/90 z-20 rounded-xl backdrop-blur-sm"><div class="animate-spin rounded-full h-10 w-10 border-t-2 border-gold mb-3"></div><p class="text-[10px] text-gold animate-pulse tracking-widest">GEMINI 3 PROCESANDO...</p></div>
            
            <div id="resultado-final" class="hidden w-full animate-fade-in">
                <h2 class="font-orbitron text-xs text-gold mb-4 tracking-widest border-b border-white/10 pb-2">2. RESPUESTA DEL N√öCLEO</h2>
                <div class="bg-gold/5 border-l-2 border-gold p-3 mb-4 rounded-r"><p id="titulo-status" class="font-bold text-sm mb-1"></p><p id="mensaje-ia" class="text-sm italic text-gray-300 font-light"></p></div>
                
                <div id="zona-pago" class="hidden">
                    <div class="flex justify-between items-center mb-2"><span class="text-[10px] uppercase text-gray-400">LICENCIA DE PRUEBA</span><span class="font-orbitron text-gold font-bold">$1.00 USD</span></div>
                    <div id="paypal-button-container" class="z-10 relative"></div>
                    <p class="text-[9px] text-center text-gray-500 mt-2">Plataforma Segura SSL</p>
                </div>
                
                <div id="zona-rechazo" class="hidden mt-2"><a href="https://wa.me/584124577822" class="block text-center py-2 border border-red-500 text-red-500 text-xs font-bold rounded hover:bg-red-500/10 uppercase">Solicitar Ayuda</a></div>
            </div>
        </section>
    </main>

    <a href="https://wa.me/584124577822?text=Soporte" target="_blank" class="fixed bottom-4 right-4 bg-green-600 hover:bg-green-500 text-white p-3 rounded-full shadow-lg z-50 float-btn"><span class="font-bold text-xs">SOPORTE</span></a>

    <script>
        const API_URL = "https://us-central1-tcis-titan-12.cloudfunctions.net/agos-v11"; 
        const API_KEY = "dosespejossemiranyelpezrespirafueradelagua";
        const giSlider = document.getElementById('gi'); const gaSlider = document.getElementById('ga');
        giSlider.oninput = () => document.getElementById('gi-val').innerText = giSlider.value + "%";
        gaSlider.oninput = () => document.getElementById('ga-val').innerText = gaSlider.value + "%";
        let paypalRendered = false;

        async function consultarTitan() {
            const intencion = document.getElementById('intencion').value;
            const btn = document.getElementById('btn-action');
            if(!intencion) return alert("Arquitecto, ingrese su intenci√≥n.");
            document.getElementById('estado-espera').classList.add('hidden'); document.getElementById('resultado-final').classList.add('hidden'); document.getElementById('loader').classList.remove('hidden'); btn.disabled = true;

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'X-MBR-Auth': API_KEY },
                    body: JSON.stringify({ observation: { gi_value: parseInt(giSlider.value) / 100, ga_value: parseInt(gaSlider.value) / 100, user_intent: intencion } })
                });
                const data = await response.json();
                document.getElementById('loader').classList.add('hidden'); document.getElementById('resultado-final').classList.remove('hidden'); document.getElementById('mensaje-ia').innerText = `"${data.message}"`;

                if(data.decision === "act") {
                    document.getElementById('titulo-status').innerHTML = `<span class="text-green-400">‚úÖ APROBADO</span>`;
                    document.getElementById('zona-pago').classList.remove('hidden');
                    document.getElementById('zona-rechazo').classList.add('hidden');

                    if (!paypalRendered) {
                        // AQU√ç EST√Å EL PRECIO DE $1.00 CONFIGURADO CORRECTAMENTE
                        paypal.Buttons({
                            style: { layout: 'vertical', color: 'gold', shape: 'rect', label: 'pay' },
                            createOrder: function(data, actions) {
                                return actions.order.create({
                                    purchase_units: [{
                                        description: "PRUEBA TITAN - $1",
                                        amount: { value: '1.00' } // PRECIO DE PRUEBA
                                    }]
                                });
                            },
                            onApprove: function(data, actions) {
                                return actions.order.capture().then(function(details) {
                                    alert('¬°Pago de Prueba Exitoso! Redirigiendo...');
                                    window.location.href = "https://wa.me/584124577822?text=PAGO_TEST_1_DOLAR_" + details.id;
                                });
                            },
                            onError: function (err) {
                                console.error('Error PayPal:', err);
                                alert("No se pudo procesar el pago. Aseg√∫rate de NO usar tu propia tarjeta vinculada a esta cuenta.");
                            }
                        }).render('#paypal-button-container');
                        paypalRendered = true;
                    }
                } else {
                    document.getElementById('titulo-status').innerHTML = `<span class="text-red-500">üõë VETO T√âCNICO</span>`;
                    document.getElementById('zona-pago').classList.add('hidden'); document.getElementById('zona-rechazo').classList.remove('hidden');
                }
            } catch (error) { alert("Error de conexi√≥n."); document.getElementById('loader').classList.add('hidden'); btn.disabled = false; }
        }
    </script>
</body>
</html>
